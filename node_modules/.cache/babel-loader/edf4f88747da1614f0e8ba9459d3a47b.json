{"ast":null,"code":"import _classCallCheck from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport eventedState from '../../globals/js/mixins/evented-state';\nimport handles from '../../globals/js/mixins/handles';\nimport on from '../../globals/js/misc/on';\n\nvar Slider =\n/*#__PURE__*/\nfunction (_mixin) {\n  _inherits(Slider, _mixin);\n\n  /**\n   * Slider.\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends Handles\n   * @param {HTMLElement} element The element working as an slider.\n   */\n  function Slider(element, options) {\n    var _this;\n\n    _classCallCheck(this, Slider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Slider).call(this, element, options));\n\n    _this._changeState = function (state, detail, callback) {\n      callback();\n    };\n\n    _this.sliderActive = false;\n    _this.dragging = false;\n    _this.track = _this.element.querySelector(_this.options.selectorTrack);\n    _this.filledTrack = _this.element.querySelector(_this.options.selectorFilledTrack);\n    _this.thumb = _this.element.querySelector(_this.options.selectorThumb);\n    _this.input = _this.element.querySelector(_this.options.selectorInput);\n\n    if (_this.element.dataset.sliderInputBox) {\n      _this.boundInput = _this.element.ownerDocument.querySelector(_this.element.dataset.sliderInputBox);\n\n      _this._updateInput();\n\n      _this.manage(on(_this.boundInput, 'change', function (evt) {\n        _this.setValue(evt.target.value);\n      }));\n\n      _this.manage(on(_this.boundInput, 'focus', function (evt) {\n        evt.target.select();\n      })); // workaround for safari\n\n\n      _this.manage(on(_this.boundInput, 'mouseup', function (evt) {\n        evt.preventDefault();\n      }));\n    }\n\n    _this._updatePosition();\n\n    _this.manage(on(_this.thumb, 'mousedown', function () {\n      _this.sliderActive = true;\n    }));\n\n    _this.manage(on(_this.element.ownerDocument, 'mouseup', function () {\n      _this.sliderActive = false;\n    }));\n\n    _this.manage(on(_this.element.ownerDocument, 'mousemove', function (evt) {\n      var disabled = _this.element.classList.contains(_this.options.classDisabled);\n\n      if (_this.sliderActive === true && !disabled) {\n        _this._updatePosition(evt);\n      }\n    }));\n\n    _this.manage(on(_this.thumb, 'keydown', function (evt) {\n      var disabled = _this.element.classList.contains(_this.options.classDisabled);\n\n      if (!disabled) {\n        _this._updatePosition(evt);\n      }\n    }));\n\n    _this.manage(on(_this.track, 'click', function (evt) {\n      var disabled = _this.element.classList.contains(_this.options.classDisabled);\n\n      if (!disabled) {\n        _this._updatePosition(evt);\n      }\n    }));\n\n    return _this;\n  }\n\n  _createClass(Slider, [{\n    key: \"_updatePosition\",\n    value: function _updatePosition(evt) {\n      var _this2 = this;\n\n      var _this$_calcValue = this._calcValue(evt),\n          left = _this$_calcValue.left,\n          newValue = _this$_calcValue.newValue;\n\n      if (this.dragging) {\n        return;\n      }\n\n      this.dragging = true;\n      requestAnimationFrame(function () {\n        _this2.dragging = false;\n        _this2.thumb.style.left = \"\".concat(left, \"%\");\n        _this2.filledTrack.style.transform = \"translate(0%, -50%) scaleX(\".concat(left / 100, \")\");\n        _this2.input.value = newValue;\n\n        _this2._updateInput();\n\n        _this2.changeState('slider-value-change', {\n          value: newValue\n        });\n      });\n    }\n  }, {\n    key: \"_calcValue\",\n    value: function _calcValue(evt) {\n      var _this$getInputProps = this.getInputProps(),\n          value = _this$getInputProps.value,\n          min = _this$getInputProps.min,\n          max = _this$getInputProps.max,\n          step = _this$getInputProps.step;\n\n      var range = max - min;\n      var valuePercentage = (value - min) / range * 100;\n      var left;\n      var newValue;\n      left = valuePercentage;\n      newValue = value;\n\n      if (evt) {\n        var type = evt.type;\n\n        if (type === 'keydown') {\n          var direction = {\n            40: -1,\n            // decreasing\n            37: -1,\n            // decreasing\n            38: 1,\n            // increasing\n            39: 1 // increasing\n\n          }[evt.which];\n\n          if (direction !== undefined) {\n            var multiplier = evt.shiftKey === true ? range / step / this.options.stepMultiplier : 1;\n            var stepMultiplied = step * multiplier;\n            var stepSize = stepMultiplied / range * 100;\n            left = valuePercentage + stepSize * direction;\n            newValue = Number(value) + stepMultiplied * direction;\n          }\n        }\n\n        if (type === 'mousemove' || type === 'click') {\n          if (type === 'click') {\n            this.element.querySelector(this.options.selectorThumb).classList.add(this.options.classThumbClicked);\n          } else {\n            this.element.querySelector(this.options.selectorThumb).classList.remove(this.options.classThumbClicked);\n          }\n\n          var track = this.track.getBoundingClientRect();\n          var unrounded = (evt.clientX - track.left) / track.width;\n          var rounded = Math.round(range * unrounded / step) * step;\n          left = rounded / range * 100;\n          newValue = rounded + min;\n        }\n      }\n\n      if (newValue <= Number(min)) {\n        left = 0;\n        newValue = min;\n      }\n\n      if (newValue >= Number(max)) {\n        left = 100;\n        newValue = max;\n      }\n\n      return {\n        left: left,\n        newValue: newValue\n      };\n    }\n  }, {\n    key: \"_updateInput\",\n    value: function _updateInput() {\n      if (this.boundInput) {\n        this.boundInput.value = this.input.value;\n      }\n    }\n  }, {\n    key: \"getInputProps\",\n    value: function getInputProps() {\n      var values = {\n        value: Number(this.input.value),\n        min: Number(this.input.min),\n        max: Number(this.input.max),\n        step: this.input.step ? Number(this.input.step) : 1\n      };\n      return values;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.input.value = value;\n\n      this._updatePosition();\n    }\n  }, {\n    key: \"stepUp\",\n    value: function stepUp() {\n      this.input.stepUp();\n\n      this._updatePosition();\n    }\n  }, {\n    key: \"stepDown\",\n    value: function stepDown() {\n      this.input.stepDown();\n\n      this._updatePosition();\n    }\n    /**\n     * The map associating DOM element and Slider UI instance.\n     * @type {WeakMap}\n     */\n\n  }], [{\n    key: \"options\",\n\n    /**\n     * The component options.\n     * If `options` is specified in the constructor,\n     * properties in this object are overriden for the instance being created.\n     * @property {string} selectorInit The CSS selector to find slider instances.\n     */\n    get: function get() {\n      var prefix = settings.prefix;\n      return {\n        selectorInit: '[data-slider]',\n        selectorTrack: \".\".concat(prefix, \"--slider__track\"),\n        selectorFilledTrack: \".\".concat(prefix, \"--slider__filled-track\"),\n        selectorThumb: \".\".concat(prefix, \"--slider__thumb\"),\n        selectorInput: \".\".concat(prefix, \"--slider__input\"),\n        classDisabled: \"\".concat(prefix, \"--slider--disabled\"),\n        classThumbClicked: \"\".concat(prefix, \"--slider__thumb--clicked\"),\n        eventBeforeSliderValueChange: 'slider-before-value-change',\n        eventAfterSliderValueChange: 'slider-after-value-change',\n        stepMultiplier: 4\n      };\n    }\n  }]);\n\n  return Slider;\n}(mixin(createComponent, initComponentBySearch, eventedState, handles));\n\nSlider.components = new WeakMap();\nexport default Slider;","map":{"version":3,"sources":["/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/src/components/slider/slider.js"],"names":["settings","mixin","createComponent","initComponentBySearch","eventedState","handles","on","Slider","element","options","_changeState","state","detail","callback","sliderActive","dragging","track","querySelector","selectorTrack","filledTrack","selectorFilledTrack","thumb","selectorThumb","input","selectorInput","dataset","sliderInputBox","boundInput","ownerDocument","_updateInput","manage","evt","setValue","target","value","select","preventDefault","_updatePosition","disabled","classList","contains","classDisabled","_calcValue","left","newValue","requestAnimationFrame","style","transform","changeState","getInputProps","min","max","step","range","valuePercentage","type","direction","which","undefined","multiplier","shiftKey","stepMultiplier","stepMultiplied","stepSize","Number","add","classThumbClicked","remove","getBoundingClientRect","unrounded","clientX","width","rounded","Math","round","values","stepUp","stepDown","prefix","selectorInit","eventBeforeSliderValueChange","eventAfterSliderValueChange","components","WeakMap"],"mappings":"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","sourcesContent":["import settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport eventedState from '../../globals/js/mixins/evented-state';\nimport handles from '../../globals/js/mixins/handles';\nimport on from '../../globals/js/misc/on';\n\nclass Slider extends mixin(createComponent, initComponentBySearch, eventedState, handles) {\n  /**\n   * Slider.\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends Handles\n   * @param {HTMLElement} element The element working as an slider.\n   */\n  constructor(element, options) {\n    super(element, options);\n\n    this.sliderActive = false;\n    this.dragging = false;\n\n    this.track = this.element.querySelector(this.options.selectorTrack);\n    this.filledTrack = this.element.querySelector(this.options.selectorFilledTrack);\n    this.thumb = this.element.querySelector(this.options.selectorThumb);\n    this.input = this.element.querySelector(this.options.selectorInput);\n\n    if (this.element.dataset.sliderInputBox) {\n      this.boundInput = this.element.ownerDocument.querySelector(this.element.dataset.sliderInputBox);\n      this._updateInput();\n      this.manage(\n        on(this.boundInput, 'change', evt => {\n          this.setValue(evt.target.value);\n        })\n      );\n      this.manage(\n        on(this.boundInput, 'focus', evt => {\n          evt.target.select();\n        })\n      );\n      // workaround for safari\n      this.manage(\n        on(this.boundInput, 'mouseup', evt => {\n          evt.preventDefault();\n        })\n      );\n    }\n\n    this._updatePosition();\n\n    this.manage(\n      on(this.thumb, 'mousedown', () => {\n        this.sliderActive = true;\n      })\n    );\n    this.manage(\n      on(this.element.ownerDocument, 'mouseup', () => {\n        this.sliderActive = false;\n      })\n    );\n    this.manage(\n      on(this.element.ownerDocument, 'mousemove', evt => {\n        const disabled = this.element.classList.contains(this.options.classDisabled);\n        if (this.sliderActive === true && !disabled) {\n          this._updatePosition(evt);\n        }\n      })\n    );\n    this.manage(\n      on(this.thumb, 'keydown', evt => {\n        const disabled = this.element.classList.contains(this.options.classDisabled);\n        if (!disabled) {\n          this._updatePosition(evt);\n        }\n      })\n    );\n    this.manage(\n      on(this.track, 'click', evt => {\n        const disabled = this.element.classList.contains(this.options.classDisabled);\n        if (!disabled) {\n          this._updatePosition(evt);\n        }\n      })\n    );\n  }\n\n  _changeState = (state, detail, callback) => {\n    callback();\n  };\n\n  _updatePosition(evt) {\n    const { left, newValue } = this._calcValue(evt);\n\n    if (this.dragging) {\n      return;\n    }\n\n    this.dragging = true;\n\n    requestAnimationFrame(() => {\n      this.dragging = false;\n      this.thumb.style.left = `${left}%`;\n      this.filledTrack.style.transform = `translate(0%, -50%) scaleX(${left / 100})`;\n      this.input.value = newValue;\n      this._updateInput();\n      this.changeState('slider-value-change', { value: newValue });\n    });\n  }\n\n  _calcValue(evt) {\n    const { value, min, max, step } = this.getInputProps();\n\n    const range = max - min;\n    const valuePercentage = ((value - min) / range) * 100;\n\n    let left;\n    let newValue;\n    left = valuePercentage;\n    newValue = value;\n\n    if (evt) {\n      const { type } = evt;\n\n      if (type === 'keydown') {\n        const direction = {\n          40: -1, // decreasing\n          37: -1, // decreasing\n          38: 1, // increasing\n          39: 1, // increasing\n        }[evt.which];\n\n        if (direction !== undefined) {\n          const multiplier = evt.shiftKey === true ? range / step / this.options.stepMultiplier : 1;\n          const stepMultiplied = step * multiplier;\n          const stepSize = (stepMultiplied / range) * 100;\n          left = valuePercentage + stepSize * direction;\n          newValue = Number(value) + stepMultiplied * direction;\n        }\n      }\n      if (type === 'mousemove' || type === 'click') {\n        if (type === 'click') {\n          this.element.querySelector(this.options.selectorThumb).classList.add(this.options.classThumbClicked);\n        } else {\n          this.element.querySelector(this.options.selectorThumb).classList.remove(this.options.classThumbClicked);\n        }\n\n        const track = this.track.getBoundingClientRect();\n        const unrounded = (evt.clientX - track.left) / track.width;\n        const rounded = Math.round((range * unrounded) / step) * step;\n        left = (rounded / range) * 100;\n        newValue = rounded + min;\n      }\n    }\n\n    if (newValue <= Number(min)) {\n      left = 0;\n      newValue = min;\n    }\n    if (newValue >= Number(max)) {\n      left = 100;\n      newValue = max;\n    }\n\n    return { left, newValue };\n  }\n\n  _updateInput() {\n    if (this.boundInput) {\n      this.boundInput.value = this.input.value;\n    }\n  }\n\n  getInputProps() {\n    const values = {\n      value: Number(this.input.value),\n      min: Number(this.input.min),\n      max: Number(this.input.max),\n      step: this.input.step ? Number(this.input.step) : 1,\n    };\n    return values;\n  }\n\n  setValue(value) {\n    this.input.value = value;\n    this._updatePosition();\n  }\n\n  stepUp() {\n    this.input.stepUp();\n    this._updatePosition();\n  }\n\n  stepDown() {\n    this.input.stepDown();\n    this._updatePosition();\n  }\n\n  /**\n   * The map associating DOM element and Slider UI instance.\n   * @type {WeakMap}\n   */\n  static components = new WeakMap();\n\n  /**\n   * The component options.\n   * If `options` is specified in the constructor,\n   * properties in this object are overriden for the instance being created.\n   * @property {string} selectorInit The CSS selector to find slider instances.\n   */\n  static get options() {\n    const { prefix } = settings;\n    return {\n      selectorInit: '[data-slider]',\n      selectorTrack: `.${prefix}--slider__track`,\n      selectorFilledTrack: `.${prefix}--slider__filled-track`,\n      selectorThumb: `.${prefix}--slider__thumb`,\n      selectorInput: `.${prefix}--slider__input`,\n      classDisabled: `${prefix}--slider--disabled`,\n      classThumbClicked: `${prefix}--slider__thumb--clicked`,\n      eventBeforeSliderValueChange: 'slider-before-value-change',\n      eventAfterSliderValueChange: 'slider-after-value-change',\n      stepMultiplier: 4,\n    };\n  }\n}\n\nexport default Slider;\n"]},"metadata":{},"sourceType":"module"}