{"ast":null,"code":"import _toConsumableArray from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Flatpickr from 'flatpickr';\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport handles from '../../globals/js/mixins/handles';\nimport on from '../../globals/js/misc/on';\n/* eslint no-underscore-dangle: [2, { \"allow\": [\"_input\", \"_updateClassNames\", \"_updateInputFields\"], \"allowAfterThis\": true }] */\n// `this.options` create-component mix-in creates prototype chain\n// so that `options` given in constructor argument wins over the one defined in static `options` property\n// 'Flatpickr' wants flat structure of object instead\n\nfunction flattenOptions(options) {\n  var o = {}; // eslint-disable-next-line guard-for-in, no-restricted-syntax\n\n  for (var key in options) {\n    o[key] = options[key];\n  }\n\n  return o;\n}\n/**\n * Augments Flatpickr instance so that event objects Flatpickr fires is marked as non-user-triggered events.\n * @param {Flatpickr} calendar The Flatpickr instance.\n * @returns {Flatpickr} The augmented Flatpickr instance.\n * @private\n */\n\n\nfunction augmentFlatpickr(calendar) {\n  var container = calendar._;\n\n  if (container) {\n    if (container.changeEvent) {\n      container._changeEvent = container.changeEvent; // eslint-disable-line no-underscore-dangle\n    }\n\n    Object.defineProperty(container, 'changeEvent', {\n      get: function get() {\n        return this._changeEvent;\n      },\n      set: function set(value) {\n        value.detail = Object.assign(value.detail || {}, {\n          fromFlatpickr: true\n        });\n        this._changeEvent = value;\n      }\n    });\n  }\n\n  return calendar;\n} // Weekdays shorthand for english locale\n\n\nFlatpickr.l10ns.en.weekdays.shorthand.forEach(function (day, index) {\n  var currentDay = Flatpickr.l10ns.en.weekdays.shorthand;\n\n  if (currentDay[index] === 'Thu' || currentDay[index] === 'Th') {\n    currentDay[index] = 'Th';\n  } else {\n    currentDay[index] = currentDay[index].charAt(0);\n  }\n});\n\nvar DatePicker =\n/*#__PURE__*/\nfunction (_mixin) {\n  _inherits(DatePicker, _mixin);\n\n  /**\n   * DatePicker.\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends Handles\n   * @param {HTMLElement} element The element working as an date picker.\n   */\n  function DatePicker(element, options) {\n    var _this;\n\n    _classCallCheck(this, DatePicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DatePicker).call(this, element, options));\n\n    _this._handleFocus = function () {\n      if (_this.calendar) {\n        _this.calendar.open();\n      }\n    };\n\n    _this._handleBlur = function (event) {\n      if (_this.calendar) {\n        var focusTo = event.relatedTarget;\n\n        if (!focusTo || !_this.element.contains(focusTo) && !_this.calendar.calendarContainer.contains(focusTo)) {\n          _this.calendar.close();\n        }\n      }\n    };\n\n    _this._initDatePicker = function (type) {\n      if (type === 'range') {\n        // Given FlatPickr assumes one `<input>` even in range mode,\n        // use a hidden `<input>` for such purpose, separate from our from/to `<input>`s\n        var doc = _this.element.ownerDocument;\n        var rangeInput = doc.createElement('input');\n        rangeInput.className = _this.options.classVisuallyHidden;\n        rangeInput.setAttribute('aria-hidden', 'true');\n        doc.body.appendChild(rangeInput);\n        _this._rangeInput = rangeInput; // An attempt to open the date picker dropdown when this component gets focus,\n        // and close the date picker dropdown when this component loses focus\n\n        var w = doc.defaultView;\n        var hasFocusin = 'onfocusin' in w;\n        var hasFocusout = 'onfocusout' in w;\n        var focusinEventName = hasFocusin ? 'focusin' : 'focus';\n        var focusoutEventName = hasFocusout ? 'focusout' : 'blur';\n\n        _this.manage(on(_this.element, focusinEventName, _this._handleFocus, !hasFocusin));\n\n        _this.manage(on(_this.element, focusoutEventName, _this._handleBlur, !hasFocusout));\n\n        _this.manage(on(_this.element.querySelector(_this.options.selectorDatePickerIcon), focusoutEventName, _this._handleBlur, !hasFocusout)); // An attempt to disable Flatpickr's focus tracking system,\n        // which has adverse effect with our old set up with two `<input>`s or our latest setup with a hidden `<input>`\n\n\n        _this.manage(on(doc, 'mousedown', function () {\n          if (_this.calendar.isOpen) {\n            _this.calendar.config.inline = true;\n            setTimeout(function () {\n              _this.calendar.config.inline = false;\n            }, 0);\n          }\n        }));\n      }\n\n      var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var date = type === 'range' ? _this._rangeInput : _this.element.querySelector(_this.options.selectorDatePickerInput);\n      var _this$options = _this.options,\n          _onClose = _this$options.onClose,\n          _onChange = _this$options.onChange,\n          _onMonthChange = _this$options.onMonthChange,\n          _onYearChange = _this$options.onYearChange,\n          _onOpen = _this$options.onOpen,\n          _onValueUpdate = _this$options.onValueUpdate;\n      var calendar = new Flatpickr(date, Object.assign(flattenOptions(_this.options), {\n        allowInput: true,\n        mode: type,\n        positionElement: type === 'range' && _this.element.querySelector(_this.options.selectorDatePickerInputFrom),\n        onClose: function onClose(selectedDates) {\n          for (var _len = arguments.length, remainder = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            remainder[_key - 1] = arguments[_key];\n          }\n\n          if (!_onClose || _onClose.call.apply(_onClose, [this, selectedDates].concat(remainder)) !== false) {\n            self._updateClassNames(calendar);\n\n            self._updateInputFields(selectedDates, type);\n          }\n        },\n        onChange: function onChange() {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          if (!_onChange || _onChange.call.apply(_onChange, [this].concat(args)) !== false) {\n            self._updateClassNames(calendar);\n\n            if (type === 'range') {\n              if (calendar.selectedDates.length === 1 && calendar.isOpen) {\n                self.element.querySelector(self.options.selectorDatePickerInputTo).classList.add(self.options.classFocused);\n              } else {\n                self.element.querySelector(self.options.selectorDatePickerInputTo).classList.remove(self.options.classFocused);\n              }\n            }\n          }\n        },\n        onMonthChange: function onMonthChange() {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          if (!_onMonthChange || _onMonthChange.call.apply(_onMonthChange, [this].concat(args)) !== false) {\n            self._updateClassNames(calendar);\n          }\n        },\n        onYearChange: function onYearChange() {\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          if (!_onYearChange || _onYearChange.call.apply(_onYearChange, [this].concat(args)) !== false) {\n            self._updateClassNames(calendar);\n          }\n        },\n        onOpen: function onOpen() {\n          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n          }\n\n          if (!_onOpen || _onOpen.call.apply(_onOpen, [this].concat(args)) !== false) {\n            self._updateClassNames(calendar);\n          }\n        },\n        onValueUpdate: function onValueUpdate() {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n\n          if ((!_onValueUpdate || _onValueUpdate.call.apply(_onValueUpdate, [this].concat(args)) !== false) && type === 'range') {\n            self._updateInputFields(self.calendar.selectedDates, type);\n          }\n        },\n        nextArrow: _this._rightArrowHTML(),\n        prevArrow: _this._leftArrowHTML()\n      }));\n\n      if (type === 'range') {\n        _this._addInputLogic(_this.element.querySelector(_this.options.selectorDatePickerInputFrom), 0);\n\n        _this._addInputLogic(_this.element.querySelector(_this.options.selectorDatePickerInputTo), 1);\n      }\n\n      _this.manage(on(_this.element.querySelector(_this.options.selectorDatePickerIcon), 'click', function () {\n        calendar.open();\n      }));\n\n      _this._updateClassNames(calendar);\n\n      if (type !== 'range') {\n        _this._addInputLogic(date);\n      }\n\n      return augmentFlatpickr(calendar);\n    };\n\n    _this._addInputLogic = function (input, index) {\n      if (!isNaN(index) && (index < 0 || index > 1)) {\n        throw new RangeError(\"The index of <input> (\".concat(index, \") is out of range.\"));\n      }\n\n      var inputField = input;\n\n      _this.manage(on(inputField, 'change', function (evt) {\n        if (!evt.detail || !evt.detail.fromFlatpickr) {\n          var inputDate = _this.calendar.parseDate(inputField.value);\n\n          if (inputDate && !isNaN(inputDate.valueOf())) {\n            if (isNaN(index)) {\n              _this.calendar.setDate(inputDate);\n            } else {\n              var selectedDates = _this.calendar.selectedDates;\n              selectedDates[index] = inputDate;\n\n              _this.calendar.setDate(selectedDates);\n            }\n          }\n        }\n\n        _this._updateClassNames(_this.calendar);\n      })); // An attempt to temporarily set the `<input>` being edited as the one FlatPicker manages,\n      // as FlatPicker attempts to take over `keydown` event handler on `document` to run on the date picker dropdown.\n\n\n      _this.manage(on(inputField, 'keydown', function (evt) {\n        var origInput = _this.calendar._input;\n        _this.calendar._input = evt.target;\n        setTimeout(function () {\n          _this.calendar._input = origInput;\n        });\n      }));\n    };\n\n    _this._updateClassNames = function (calendar) {\n      var calendarContainer = calendar.calendarContainer;\n      calendarContainer.classList.add(_this.options.classCalendarContainer);\n      calendarContainer.querySelector('.flatpickr-month').classList.add(_this.options.classMonth);\n      calendarContainer.querySelector('.flatpickr-weekdays').classList.add(_this.options.classWeekdays);\n      calendarContainer.querySelector('.flatpickr-days').classList.add(_this.options.classDays);\n\n      _toConsumableArray(calendarContainer.querySelectorAll('.flatpickr-weekday')).forEach(function (item) {\n        var currentItem = item;\n        currentItem.innerHTML = currentItem.innerHTML.replace(/\\s+/g, '');\n        currentItem.classList.add(_this.options.classWeekday);\n      });\n\n      _toConsumableArray(calendarContainer.querySelectorAll('.flatpickr-day')).forEach(function (item) {\n        item.classList.add(_this.options.classDay);\n\n        if (item.classList.contains('today') && calendar.selectedDates.length > 0) {\n          item.classList.add('no-border');\n        } else if (item.classList.contains('today') && calendar.selectedDates.length === 0) {\n          item.classList.remove('no-border');\n        }\n      });\n    };\n\n    _this._updateInputFields = function (selectedDates, type) {\n      if (type === 'range') {\n        if (selectedDates.length === 2) {\n          _this.element.querySelector(_this.options.selectorDatePickerInputFrom).value = _this._formatDate(selectedDates[0]);\n          _this.element.querySelector(_this.options.selectorDatePickerInputTo).value = _this._formatDate(selectedDates[1]);\n        } else if (selectedDates.length === 1) {\n          _this.element.querySelector(_this.options.selectorDatePickerInputFrom).value = _this._formatDate(selectedDates[0]);\n        }\n      } else if (selectedDates.length === 1) {\n        _this.element.querySelector(_this.options.selectorDatePickerInput).value = _this._formatDate(selectedDates[0]);\n      }\n\n      _this._updateClassNames(_this.calendar);\n    };\n\n    _this._formatDate = function (date) {\n      return _this.calendar.formatDate(date, _this.calendar.config.dateFormat);\n    };\n\n    var _type = _this.element.getAttribute(_this.options.attribType);\n\n    _this.calendar = _this._initDatePicker(_type);\n\n    _this.manage(on(_this.element, 'keydown', function (e) {\n      if (e.which === 40) {\n        _this.calendar.calendarContainer.focus();\n      }\n    }));\n\n    _this.manage(on(_this.calendar.calendarContainer, 'keydown', function (e) {\n      if (e.which === 9 && _type === 'range') {\n        _this._updateClassNames(_this.calendar);\n\n        _this.element.querySelector(_this.options.selectorDatePickerInputFrom).focus();\n      }\n    }));\n\n    return _this;\n  }\n  /**\n   * Opens the date picker dropdown when this component gets focus.\n   * Used only for range mode for now.\n   * @private\n   */\n\n\n  _createClass(DatePicker, [{\n    key: \"_rightArrowHTML\",\n    value: function _rightArrowHTML() {\n      return \"\\n      <svg width=\\\"8\\\" height=\\\"12\\\" viewBox=\\\"0 0 8 12\\\" fill-rule=\\\"evenodd\\\">\\n        <path d=\\\"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z\\\"></path>\\n      </svg>\";\n    }\n  }, {\n    key: \"_leftArrowHTML\",\n    value: function _leftArrowHTML() {\n      return \"\\n      <svg width=\\\"8\\\" height=\\\"12\\\" viewBox=\\\"0 0 8 12\\\" fill-rule=\\\"evenodd\\\">\\n        <path d=\\\"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z\\\"></path>\\n      </svg>\";\n    }\n  }, {\n    key: \"release\",\n    value: function release() {\n      if (this._rangeInput && this._rangeInput.parentNode) {\n        this._rangeInput.parentNode.removeChild(this._rangeInput);\n      }\n\n      if (this.calendar) {\n        try {\n          this.calendar.destroy();\n        } catch (err) {} // eslint-disable-line no-empty\n\n\n        this.calendar = null;\n      }\n\n      return _get(_getPrototypeOf(DatePicker.prototype), \"release\", this).call(this);\n    }\n    /**\n     * The component options.\n     * If `options` is specified in the constructor,\n     * {@linkcode DatePicker.create .create()}, or {@linkcode DatePicker.init .init()},\n     * properties in this object are overriden for the instance being create and how {@linkcode DatePicker.init .init()} works.\n     * @property {string} selectorInit The CSS selector to find date picker UIs.\n     */\n\n  }], [{\n    key: \"options\",\n    get: function get() {\n      var prefix = settings.prefix;\n      return {\n        selectorInit: '[data-date-picker]',\n        selectorDatePickerInput: '[data-date-picker-input]',\n        selectorDatePickerInputFrom: '[data-date-picker-input-from]',\n        selectorDatePickerInputTo: '[data-date-picker-input-to]',\n        selectorDatePickerIcon: '[data-date-picker-icon]',\n        classCalendarContainer: \"\".concat(prefix, \"--date-picker__calendar\"),\n        classMonth: \"\".concat(prefix, \"--date-picker__month\"),\n        classWeekdays: \"\".concat(prefix, \"--date-picker__weekdays\"),\n        classDays: \"\".concat(prefix, \"--date-picker__days\"),\n        classWeekday: \"\".concat(prefix, \"--date-picker__weekday\"),\n        classDay: \"\".concat(prefix, \"--date-picker__day\"),\n        classFocused: \"\".concat(prefix, \"--focused\"),\n        classVisuallyHidden: \"\".concat(prefix, \"--visually-hidden\"),\n        attribType: 'data-date-picker-type',\n        dateFormat: 'm/d/Y'\n      };\n    }\n    /**\n     * The map associating DOM element and date picker UI instance.\n     * @type {WeakMap}\n     */\n\n  }]);\n\n  return DatePicker;\n}(mixin(createComponent, initComponentBySearch, handles));\n\nDatePicker.components = new WeakMap();\nexport default DatePicker;","map":{"version":3,"sources":["/Users/tatianamoreira/Documents/testTech/react/carbon-design-react-test/src/components/date-picker/date-picker.js"],"names":["Flatpickr","settings","mixin","createComponent","initComponentBySearch","handles","on","flattenOptions","options","o","key","augmentFlatpickr","calendar","container","_","changeEvent","_changeEvent","Object","defineProperty","get","set","value","detail","assign","fromFlatpickr","l10ns","en","weekdays","shorthand","forEach","day","index","currentDay","charAt","DatePicker","element","_handleFocus","open","_handleBlur","event","focusTo","relatedTarget","contains","calendarContainer","close","_initDatePicker","type","doc","ownerDocument","rangeInput","createElement","className","classVisuallyHidden","setAttribute","body","appendChild","_rangeInput","w","defaultView","hasFocusin","hasFocusout","focusinEventName","focusoutEventName","manage","querySelector","selectorDatePickerIcon","isOpen","config","inline","setTimeout","self","date","selectorDatePickerInput","onClose","onChange","onMonthChange","onYearChange","onOpen","onValueUpdate","allowInput","mode","positionElement","selectorDatePickerInputFrom","selectedDates","remainder","call","_updateClassNames","_updateInputFields","args","length","selectorDatePickerInputTo","classList","add","classFocused","remove","nextArrow","_rightArrowHTML","prevArrow","_leftArrowHTML","_addInputLogic","input","isNaN","RangeError","inputField","evt","inputDate","parseDate","valueOf","setDate","origInput","_input","target","classCalendarContainer","classMonth","classWeekdays","classDays","querySelectorAll","item","currentItem","innerHTML","replace","classWeekday","classDay","_formatDate","formatDate","dateFormat","getAttribute","attribType","e","which","focus","parentNode","removeChild","destroy","err","prefix","selectorInit","components","WeakMap"],"mappings":"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","sourcesContent":["import Flatpickr from 'flatpickr';\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport handles from '../../globals/js/mixins/handles';\nimport on from '../../globals/js/misc/on';\n\n/* eslint no-underscore-dangle: [2, { \"allow\": [\"_input\", \"_updateClassNames\", \"_updateInputFields\"], \"allowAfterThis\": true }] */\n\n// `this.options` create-component mix-in creates prototype chain\n// so that `options` given in constructor argument wins over the one defined in static `options` property\n// 'Flatpickr' wants flat structure of object instead\n\nfunction flattenOptions(options) {\n  const o = {};\n  // eslint-disable-next-line guard-for-in, no-restricted-syntax\n  for (const key in options) {\n    o[key] = options[key];\n  }\n  return o;\n}\n\n/**\n * Augments Flatpickr instance so that event objects Flatpickr fires is marked as non-user-triggered events.\n * @param {Flatpickr} calendar The Flatpickr instance.\n * @returns {Flatpickr} The augmented Flatpickr instance.\n * @private\n */\nfunction augmentFlatpickr(calendar) {\n  const container = calendar._;\n  if (container) {\n    if (container.changeEvent) {\n      container._changeEvent = container.changeEvent; // eslint-disable-line no-underscore-dangle\n    }\n    Object.defineProperty(container, 'changeEvent', {\n      get() {\n        return this._changeEvent;\n      },\n      set(value) {\n        value.detail = Object.assign(value.detail || {}, { fromFlatpickr: true });\n        this._changeEvent = value;\n      },\n    });\n  }\n  return calendar;\n}\n\n// Weekdays shorthand for english locale\nFlatpickr.l10ns.en.weekdays.shorthand.forEach((day, index) => {\n  const currentDay = Flatpickr.l10ns.en.weekdays.shorthand;\n  if (currentDay[index] === 'Thu' || currentDay[index] === 'Th') {\n    currentDay[index] = 'Th';\n  } else {\n    currentDay[index] = currentDay[index].charAt(0);\n  }\n});\n\nclass DatePicker extends mixin(createComponent, initComponentBySearch, handles) {\n  /**\n   * DatePicker.\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends Handles\n   * @param {HTMLElement} element The element working as an date picker.\n   */\n  constructor(element, options) {\n    super(element, options);\n    const type = this.element.getAttribute(this.options.attribType);\n    this.calendar = this._initDatePicker(type);\n    this.manage(\n      on(this.element, 'keydown', e => {\n        if (e.which === 40) {\n          this.calendar.calendarContainer.focus();\n        }\n      })\n    );\n    this.manage(\n      on(this.calendar.calendarContainer, 'keydown', e => {\n        if (e.which === 9 && type === 'range') {\n          this._updateClassNames(this.calendar);\n          this.element.querySelector(this.options.selectorDatePickerInputFrom).focus();\n        }\n      })\n    );\n  }\n\n  /**\n   * Opens the date picker dropdown when this component gets focus.\n   * Used only for range mode for now.\n   * @private\n   */\n  _handleFocus = () => {\n    if (this.calendar) {\n      this.calendar.open();\n    }\n  };\n\n  /**\n   * Closes the date picker dropdown when this component loses focus.\n   * Used only for range mode for now.\n   * @private\n   */\n  _handleBlur = event => {\n    if (this.calendar) {\n      const focusTo = event.relatedTarget;\n      if (!focusTo || (!this.element.contains(focusTo) && !this.calendar.calendarContainer.contains(focusTo))) {\n        this.calendar.close();\n      }\n    }\n  };\n\n  _initDatePicker = type => {\n    if (type === 'range') {\n      // Given FlatPickr assumes one `<input>` even in range mode,\n      // use a hidden `<input>` for such purpose, separate from our from/to `<input>`s\n      const doc = this.element.ownerDocument;\n      const rangeInput = doc.createElement('input');\n      rangeInput.className = this.options.classVisuallyHidden;\n      rangeInput.setAttribute('aria-hidden', 'true');\n      doc.body.appendChild(rangeInput);\n      this._rangeInput = rangeInput;\n\n      // An attempt to open the date picker dropdown when this component gets focus,\n      // and close the date picker dropdown when this component loses focus\n      const w = doc.defaultView;\n      const hasFocusin = 'onfocusin' in w;\n      const hasFocusout = 'onfocusout' in w;\n      const focusinEventName = hasFocusin ? 'focusin' : 'focus';\n      const focusoutEventName = hasFocusout ? 'focusout' : 'blur';\n      this.manage(on(this.element, focusinEventName, this._handleFocus, !hasFocusin));\n      this.manage(on(this.element, focusoutEventName, this._handleBlur, !hasFocusout));\n      this.manage(\n        on(this.element.querySelector(this.options.selectorDatePickerIcon), focusoutEventName, this._handleBlur, !hasFocusout)\n      );\n\n      // An attempt to disable Flatpickr's focus tracking system,\n      // which has adverse effect with our old set up with two `<input>`s or our latest setup with a hidden `<input>`\n      this.manage(\n        on(doc, 'mousedown', () => {\n          if (this.calendar.isOpen) {\n            this.calendar.config.inline = true;\n            setTimeout(() => {\n              this.calendar.config.inline = false;\n            }, 0);\n          }\n        })\n      );\n    }\n    const self = this;\n    const date = type === 'range' ? this._rangeInput : this.element.querySelector(this.options.selectorDatePickerInput);\n    const { onClose, onChange, onMonthChange, onYearChange, onOpen, onValueUpdate } = this.options;\n    const calendar = new Flatpickr(\n      date,\n      Object.assign(flattenOptions(this.options), {\n        allowInput: true,\n        mode: type,\n        positionElement: type === 'range' && this.element.querySelector(this.options.selectorDatePickerInputFrom),\n        onClose(selectedDates, ...remainder) {\n          if (!onClose || onClose.call(this, selectedDates, ...remainder) !== false) {\n            self._updateClassNames(calendar);\n            self._updateInputFields(selectedDates, type);\n          }\n        },\n        onChange(...args) {\n          if (!onChange || onChange.call(this, ...args) !== false) {\n            self._updateClassNames(calendar);\n            if (type === 'range') {\n              if (calendar.selectedDates.length === 1 && calendar.isOpen) {\n                self.element.querySelector(self.options.selectorDatePickerInputTo).classList.add(self.options.classFocused);\n              } else {\n                self.element.querySelector(self.options.selectorDatePickerInputTo).classList.remove(self.options.classFocused);\n              }\n            }\n          }\n        },\n        onMonthChange(...args) {\n          if (!onMonthChange || onMonthChange.call(this, ...args) !== false) {\n            self._updateClassNames(calendar);\n          }\n        },\n        onYearChange(...args) {\n          if (!onYearChange || onYearChange.call(this, ...args) !== false) {\n            self._updateClassNames(calendar);\n          }\n        },\n        onOpen(...args) {\n          if (!onOpen || onOpen.call(this, ...args) !== false) {\n            self._updateClassNames(calendar);\n          }\n        },\n        onValueUpdate(...args) {\n          if ((!onValueUpdate || onValueUpdate.call(this, ...args) !== false) && type === 'range') {\n            self._updateInputFields(self.calendar.selectedDates, type);\n          }\n        },\n        nextArrow: this._rightArrowHTML(),\n        prevArrow: this._leftArrowHTML(),\n      })\n    );\n    if (type === 'range') {\n      this._addInputLogic(this.element.querySelector(this.options.selectorDatePickerInputFrom), 0);\n      this._addInputLogic(this.element.querySelector(this.options.selectorDatePickerInputTo), 1);\n    }\n    this.manage(\n      on(this.element.querySelector(this.options.selectorDatePickerIcon), 'click', () => {\n        calendar.open();\n      })\n    );\n    this._updateClassNames(calendar);\n    if (type !== 'range') {\n      this._addInputLogic(date);\n    }\n    return augmentFlatpickr(calendar);\n  };\n\n  _rightArrowHTML() {\n    return `\n      <svg width=\"8\" height=\"12\" viewBox=\"0 0 8 12\" fill-rule=\"evenodd\">\n        <path d=\"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z\"></path>\n      </svg>`;\n  }\n\n  _leftArrowHTML() {\n    return `\n      <svg width=\"8\" height=\"12\" viewBox=\"0 0 8 12\" fill-rule=\"evenodd\">\n        <path d=\"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z\"></path>\n      </svg>`;\n  }\n\n  _addInputLogic = (input, index) => {\n    if (!isNaN(index) && (index < 0 || index > 1)) {\n      throw new RangeError(`The index of <input> (${index}) is out of range.`);\n    }\n    const inputField = input;\n    this.manage(\n      on(inputField, 'change', evt => {\n        if (!evt.detail || !evt.detail.fromFlatpickr) {\n          const inputDate = this.calendar.parseDate(inputField.value);\n          if (inputDate && !isNaN(inputDate.valueOf())) {\n            if (isNaN(index)) {\n              this.calendar.setDate(inputDate);\n            } else {\n              const selectedDates = this.calendar.selectedDates;\n              selectedDates[index] = inputDate;\n              this.calendar.setDate(selectedDates);\n            }\n          }\n        }\n        this._updateClassNames(this.calendar);\n      })\n    );\n    // An attempt to temporarily set the `<input>` being edited as the one FlatPicker manages,\n    // as FlatPicker attempts to take over `keydown` event handler on `document` to run on the date picker dropdown.\n    this.manage(\n      on(inputField, 'keydown', evt => {\n        const origInput = this.calendar._input;\n        this.calendar._input = evt.target;\n        setTimeout(() => {\n          this.calendar._input = origInput;\n        });\n      })\n    );\n  };\n\n  _updateClassNames = calendar => {\n    const calendarContainer = calendar.calendarContainer;\n    calendarContainer.classList.add(this.options.classCalendarContainer);\n    calendarContainer.querySelector('.flatpickr-month').classList.add(this.options.classMonth);\n    calendarContainer.querySelector('.flatpickr-weekdays').classList.add(this.options.classWeekdays);\n    calendarContainer.querySelector('.flatpickr-days').classList.add(this.options.classDays);\n    [...calendarContainer.querySelectorAll('.flatpickr-weekday')].forEach(item => {\n      const currentItem = item;\n      currentItem.innerHTML = currentItem.innerHTML.replace(/\\s+/g, '');\n      currentItem.classList.add(this.options.classWeekday);\n    });\n    [...calendarContainer.querySelectorAll('.flatpickr-day')].forEach(item => {\n      item.classList.add(this.options.classDay);\n      if (item.classList.contains('today') && calendar.selectedDates.length > 0) {\n        item.classList.add('no-border');\n      } else if (item.classList.contains('today') && calendar.selectedDates.length === 0) {\n        item.classList.remove('no-border');\n      }\n    });\n  };\n\n  _updateInputFields = (selectedDates, type) => {\n    if (type === 'range') {\n      if (selectedDates.length === 2) {\n        this.element.querySelector(this.options.selectorDatePickerInputFrom).value = this._formatDate(selectedDates[0]);\n        this.element.querySelector(this.options.selectorDatePickerInputTo).value = this._formatDate(selectedDates[1]);\n      } else if (selectedDates.length === 1) {\n        this.element.querySelector(this.options.selectorDatePickerInputFrom).value = this._formatDate(selectedDates[0]);\n      }\n    } else if (selectedDates.length === 1) {\n      this.element.querySelector(this.options.selectorDatePickerInput).value = this._formatDate(selectedDates[0]);\n    }\n    this._updateClassNames(this.calendar);\n  };\n\n  _formatDate = date => this.calendar.formatDate(date, this.calendar.config.dateFormat);\n\n  release() {\n    if (this._rangeInput && this._rangeInput.parentNode) {\n      this._rangeInput.parentNode.removeChild(this._rangeInput);\n    }\n    if (this.calendar) {\n      try {\n        this.calendar.destroy();\n      } catch (err) {} // eslint-disable-line no-empty\n      this.calendar = null;\n    }\n    return super.release();\n  }\n\n  /**\n   * The component options.\n   * If `options` is specified in the constructor,\n   * {@linkcode DatePicker.create .create()}, or {@linkcode DatePicker.init .init()},\n   * properties in this object are overriden for the instance being create and how {@linkcode DatePicker.init .init()} works.\n   * @property {string} selectorInit The CSS selector to find date picker UIs.\n   */\n  static get options() {\n    const { prefix } = settings;\n    return {\n      selectorInit: '[data-date-picker]',\n      selectorDatePickerInput: '[data-date-picker-input]',\n      selectorDatePickerInputFrom: '[data-date-picker-input-from]',\n      selectorDatePickerInputTo: '[data-date-picker-input-to]',\n      selectorDatePickerIcon: '[data-date-picker-icon]',\n      classCalendarContainer: `${prefix}--date-picker__calendar`,\n      classMonth: `${prefix}--date-picker__month`,\n      classWeekdays: `${prefix}--date-picker__weekdays`,\n      classDays: `${prefix}--date-picker__days`,\n      classWeekday: `${prefix}--date-picker__weekday`,\n      classDay: `${prefix}--date-picker__day`,\n      classFocused: `${prefix}--focused`,\n      classVisuallyHidden: `${prefix}--visually-hidden`,\n      attribType: 'data-date-picker-type',\n      dateFormat: 'm/d/Y',\n    };\n  }\n\n  /**\n   * The map associating DOM element and date picker UI instance.\n   * @type {WeakMap}\n   */\n  static components = new WeakMap();\n}\n\nexport default DatePicker;\n"]},"metadata":{},"sourceType":"module"}